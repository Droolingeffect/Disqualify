const albums = {


    "blonde": {
        title: "Blonde",
        artist: "Frank Ocean",
        cover: "img/Frank_Ocean/Blonde.jpg",
        releaseDate: "August 20, 2016",
        totalTracks: 17,
        totalDuration: "60:12",


        tracks: [  
        {
            number: 1,
            title: "Nikes",
            artist: "Frank Ocean",
            duration: "5:14",
            id: "nikes",
            source: "audio/Frank_Ocean/Blonde/Nikes.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 2,
            title: "Ivy",
            artist: "Frank Ocean",
            duration: "4:09",
            id: "ivy",
            source: "audio/Frank_Ocean/Blonde/Ivy.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 3,
            title: "Pink + White",
            artist: "Frank Ocean",
            duration: "3:04",
            id: "pinkwhite",
            source: "audio/Frank_Ocean/Blonde/Pink + White.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 4,
            title: "Be Yourself",
            artist: "Frank Ocean",
            duration: "1:26",
            id: "beyourself",
            source: "audio/Frank_Ocean/Blonde/Be Yourself.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 5,
            title: "Solo",
            artist: "Frank Ocean",
            duration: "4:17",
            id: "solo",
            source: "audio/Frank_Ocean/Blonde/Solo.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 6,
            title: "Skyline To",
            artist: "Frank Ocean",
            duration: "3:04",
            id: "skylineto",
            source: "audio/Frank_Ocean/Blonde/Skyline To.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 7,
            title: "Self Control",
            artist: "Frank Ocean",
            duration: "4:10",
            id: "selfcontrol",
            source: "audio/Frank_Ocean/Blonde/Self Control.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 8,
            title: "Good Guy",
            artist: "Frank Ocean",
            duration: "1:07",
            id: "goodguy",
            source: "audio/Frank_Ocean/Blonde/Good Guy.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 9,
            title: "Nights",
            artist: "Frank Ocean",
            duration: "5:07",
            id: "nights",
            source: "audio/Frank_Ocean/Blonde/Nights.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 10,
            title: "Solo (Reprise)",
            artist: "Frank Ocean",
            duration: "1:18",
            id: "soloreprise",
            source: "audio/Frank_Ocean/Blonde/Solo (Reprise).mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 11,
            title: "Pretty Sweet",
            artist: "Frank Ocean",
            duration: "2:38",
            id: "prettysweet",
            source: "audio/Frank_Ocean/Blonde/Rretty Sweet.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 12,
            title: "Facebook Story",
            artist: "Frank Ocean",
            duration: "1:09",
            id: "facebookstory",
            source: "audio/Frank_Ocean/Blonde/Facebook Story.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 13,
            title: "Close to You",
            artist: "Frank Ocean",
            duration: "1:25",
            id: "closetoyou",
            source: "audio/Frank_Ocean/Blonde/Close To You.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 14,
            title: "White Ferrari",
            artist: "Frank Ocean",
            duration: "4:09",
            id: "whiteferrari",
            source: "audio/Frank_Ocean/Blonde/White Ferrari.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 15,
            title: "Seigfried",
            artist: "Frank Ocean",
            duration: "5:34",
            id: "seigfried",
            source: "audio/Frank_Ocean/Blonde/Seigfried.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 16,
            title: "Godspeed",
            artist: "Frank Ocean",
            duration: "2:57",
            id: "godspeed",
            source: "audio/Frank_Ocean/Blonde/Godspeed.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        },
        {
            number: 17,
            title: "Futura Free",
            artist: "Frank Ocean",
            duration: "9:24",
            id: "futurafree",
            source: "audio/Frank_Ocean/Blonde/Futura Free.mp3",
            art: "img/Frank_Ocean/Blonde.jpg"
        }
        ],
 
           
            // data not correct
        discography: [  
            { title: "Nostalgia, Ultra", year: "2011", type: "album", image: "img/Frank_Ocean/Nostalgia_Ultra.jpg" },  
            { title: "Channel Orange", year: "2012", type: "album", image: "img/Frank_Ocean/Channel_Orange.jpg" },  
            { title: "Endless", year: "2016", type: "album", image: "img/Frank_Ocean/Endless.jpg" },  
            { title: "DHL", year: "2019", type: "single", image: "img/Frank_Ocean/DHL.jpg" },  
            { title: "In My Room", year: "2019", type: "single", image: "img/Frank_Ocean/InMyRoom.jpg" },  
            { title: "Dear April", year: "2020", type: "single", image: "img/Frank_Ocean/DearApril.jpg" },  
            { title: "Cayendo", year: "2020", type: "single", image: "img/Frank_Ocean/Cayendo.jpg" },  
            { title: "Lens", year: "2017", type: "single", image: "img/Frank_Ocean/Lens.jpg" },  
            { title: "Biking", year: "2017", type: "single", image: "img/Frank_Ocean/Biking.jpg" },  
            { title: "Provider", year: "2017", type: "single", image: "img/Frank_Ocean/Provider.jpg" },  
            { title: "Chanel", year: "2017", type: "single", image: "img/Frank_Ocean/Chanel.jpg" }  
        ],  
    },

    "channel-orange": {
      title: "Channel Orange",
      artist: "Frank Ocean",
      cover: "img/Frank_Ocean/Channel_Orange.jpg",
      releaseDate: "July 10, 2012",
      totalTracks: 17,
      totalDuration: "55:47",
      tracks: [
          {
              number: 1,
              title: "Start",
              artist: "Frank Ocean",
              duration: "0:46",
              id: "start",
              source: "audio/Frank_Ocean/Channel_Orange/Start.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 2,
              title: "Thinkin Bout You",
              artist: "Frank Ocean",
              duration: "3:21",
              id: "thinkinboutyou",
              source: "audio/Frank_Ocean/Channel_Orange/Thinkin Bout You.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 3,
              title: "Fertilizer",
              artist: "Frank Ocean",
              duration: "0:40",
              id: "fertilizer",
              source: "audio/Frank_Ocean/Channel_Orange/Fertilizer.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 4,
              title: "Sierra Leone",
              artist: "Frank Ocean",
              duration: "2:29",
              id: "sierraleone",
              source: "audio/Frank_Ocean/Channel_Orange/Sierra Leone.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 5,
              title: "Sweet Life",
              artist: "Frank Ocean",
              duration: "4:23",
              id: "sweetlife",
              source: "audio/Frank_Ocean/Channel_Orange/Sweet Life.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 6,
              title: "Not Just Money",
              artist: "Frank Ocean",
              duration: "1:00",
              id: "notjustmoney",
              source: "audio/Frank_Ocean/Channel_Orange/Not Just Money.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 7,
              title: "Super Rich Kids",
              artist: "Frank Ocean feat. Earl Sweatshirt",
              duration: "5:05",
              id: "superrichkids",
              source: "audio/Frank_Ocean/Channel_Orange/Super Rich Kids.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 8,
              title: "Pilot Jones",
              artist: "Frank Ocean",
              duration: "3:04",
              id: "pilotjones",
              source: "audio/Frank_Ocean/Channel_Orange/Pilot Jones.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 9,
              title: "Crack Rock",
              artist: "Frank Ocean",
              duration: "3:44",
              id: "crackrock",
              source: "audio/Frank_Ocean/Channel_Orange/Crack Rock.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 10,
              title: "Pyramids",
              artist: "Frank Ocean",
              duration: "9:53",
              id: "pyramids",
              source: "audio/Frank_Ocean/Channel_Orange/Pyramids.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 11,
              title: "Lost",
              artist: "Frank Ocean",
              duration: "3:54",
              id: "lost",
              source: "audio/Frank_Ocean/Channel_Orange/Lost.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 12,
              title: "White",
              artist: "Frank Ocean feat. John Mayer",
              duration: "1:16",
              id: "white",
              source: "audio/Frank_Ocean/Channel_Orange/White.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 13,
              title: "Monks",
              artist: "Frank Ocean",
              duration: "3:20",
              id: "monks",
              source: "audio/Frank_Ocean/Channel_Orange/Monks.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 14,
              title: "Bad Religion",
              artist: "Frank Ocean",
              duration: "2:55",
              id: "badreligion",
              source: "audio/Frank_Ocean/Channel_Orange/Bad Religion.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 15,
              title: "Pink Matter",
              artist: "Frank Ocean feat. André 3000",
              duration: "4:29",
              id: "pinkmatter",
              source: "audio/Frank_Ocean/Channel_Orange/Pink Matter.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 16,
              title: "Forrest Gump",
              artist: "Frank Ocean",
              duration: "3:15",
              id: "forrestgump",
              source: "audio/Frank_Ocean/Channel_Orange/Forrest Gump.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },
          {
              number: 17,
              title: "End / Golden Girl",
              artist: "Frank Ocean feat. Tyler, the Creator",
              duration: "8:43",
              id: "endgoldengirl",
              source: "audio/Frank_Ocean/Channel_Orange/End Golden Girl.mp3",
              art: "img/Frank_Ocean/Channel_Orange.jpg"
          },  
      ],

      discography: [  
        { title: "Nostalgia, Ultra", year: "2011", type: "album", image: "img/Frank_Ocean/Nostalgia_Ultra.jpg" },  
        { title: "Blonde", year: "2016", type: "album", image: "img/Frank_Ocean/Blonde.jpg" },
        { title: "Endless", year: "2016", type: "album", image: "img/Frank_Ocean/Endless.jpg" },  
        { title: "DHL", year: "2019", type: "single", image: "img/Frank_Ocean/DHL.jpg" },  
        { title: "In My Room", year: "2019", type: "single", image: "img/Frank_Ocean/InMyRoom.jpg" },  
        { title: "Dear April", year: "2020", type: "single", image: "img/Frank_Ocean/DearApril.jpg" },  
        { title: "Cayendo", year: "2020", type: "single", image: "img/Frank_Ocean/Cayendo.jpg" },  
        { title: "Lens", year: "2017", type: "single", image: "img/Frank_Ocean/Lens.jpg" },  
        { title: "Biking", year: "2017", type: "single", image: "img/Frank_Ocean/Biking.jpg" },  
        { title: "Provider", year: "2017", type: "single", image: "img/Frank_Ocean/Provider.jpg" },  
        { title: "Chanel", year: "2017", type: "single", image: "img/Frank_Ocean/Chanel.jpg" }  
      ],
  },

  "nostalgia,-ultra": {
    title: "nostalgia, ULTRA.",
    artist: "Frank Ocean",
    cover: "img/Frank_Ocean/Nostalgia_Ultra.jpg",
    releaseDate: "February 16, 2011",
    totalTracks: 14,
    totalDuration: "45:00",
    tracks: [
        {
            number: 1,
            title: "Street Fighter",
            artist: "Frank Ocean",
            duration: "0:22",
            id: "streetfighter",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Street Fighter.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 2,
            title: "Strawberry Swing",
            artist: "Frank Ocean",
            duration: "3:55",
            id: "strawberryswing",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Strawberry Swing.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 3,
            title: "Novacane",
            artist: "Frank Ocean",
            duration: "5:02",
            id: "novacane",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Novacane.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 4,
            title: "We All Try",
            artist: "Frank Ocean",
            duration: "2:51",
            id: "wealltry",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/We All Try.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 5,
            title: "Bitches Talkin'",
            artist: "Frank Ocean",
            duration: "0:22",
            id: "bitchestalkin",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Bitches Talkin'.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 6,
            title: "Songs for Women",
            artist: "Frank Ocean",
            duration: "4:13",
            id: "songsforwomen",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Songs for Women.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 7,
            title: "LoveCrimes",
            artist: "Frank Ocean",
            duration: "4:00",
            id: "lovecrimes",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/LoveCrimes.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 8,
            title: "Goldeneye",
            artist: "Frank Ocean",
            duration: "0:18",
            id: "goldeneye",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Goldeneye.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 9,
            title: "There Will Be Tears",
            artist: "Frank Ocean",
            duration: "3:15",
            id: "therewillbetears",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/There Will Be Tears.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 10,
            title: "Swim Good",
            artist: "Frank Ocean",
            duration: "4:17",
            id: "swimgood",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Swim Good.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 11,
            title: "Dust",
            artist: "Frank Ocean",
            duration: "2:31",
            id: "dust",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Dust.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 12,
            title: "American Wedding",
            artist: "Frank Ocean",
            duration: "7:01",
            id: "americanwedding",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/American Wedding.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 13,
            title: "Soul Calibur",
            artist: "Frank Ocean",
            duration: "0:18",
            id: "soulcalibur",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Soul Calibur.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
        {
            number: 14,
            title: "Nature Feels",
            artist: "Frank Ocean",
            duration: "3:43",
            id: "naturefeels",
            source: "audio/Frank_Ocean/Nostalgia_Ultra/Nature Feels.mp3",
            art: "img/Frank_Ocean/Nostalgia_Ultra.jpg"
        },
    ],

    discography: [  
      { title: "Channel Orange", year: "2012", type: "album", image: "img/Frank_Ocean/Channel_Orange.jpg" },  
      { title: "Blonde", year: "2016", type: "album", image: "img/Frank_Ocean/Blonde.jpg" },
      { title: "Endless", year: "2016", type: "album", image: "img/Frank_Ocean/Endless.jpg" },  
      { title: "DHL", year: "2019", type: "single", image: "img/Frank_Ocean/DHL.jpg" },  
      { title: "In My Room", year: "2019", type: "single", image: "img/Frank_Ocean/InMyRoom.jpg" },  
      { title: "Dear April", year: "2020", type: "single", image: "img/Frank_Ocean/DearApril.jpg" },  
      { title: "Cayendo", year: "2020", type: "single", image: "img/Frank_Ocean/Cayendo.jpg" },  
      { title: "Lens", year: "2017", type: "single", image: "img/Frank_Ocean/Lens.jpg" },  
      { title: "Biking", year: "2017", type: "single", image: "img/Frank_Ocean/Biking.jpg" },  
      { title: "Provider", year: "2017", type: "single", image: "img/Frank_Ocean/Provider.jpg" },  
      { title: "Chanel", year: "2017", type: "single", image: "img/Frank_Ocean/Chanel.jpg" } 
    ],
},

  
};

// ============================
// AlbumPage.js (Connected to globalAudioPlayer.js)
// ============================

document.addEventListener('DOMContentLoaded', () => {
  const urlParams = new URLSearchParams(window.location.search);
  const albumId = urlParams.get('album') || 'blonde';
  const album = albums[albumId];

  renderAlbumHeader(album);
  renderTrackList(album);
  renderDiscography(album);
  setupDiscographyFilter();
  setupAlbumPageButtons();

  // Button Elements
  const playPauseBtn = document.getElementById('play-pause-btn');
  const nextBtn = document.getElementById('next-btn');
  const prevBtn = document.getElementById('prev-btn');
  const likeBtn = document.getElementById('like-btn');
  const muteBtn = document.getElementById('mute-btn');
  const volumeSlider = document.querySelector('.volume-slider');
  const leftArrow = document.querySelector('.left-arrow');
  const rightArrow = document.querySelector('.right-arrow');
  const sliderTrackContainer = document.querySelector('.slider-track-container');

  leftArrow?.addEventListener('click', () => {
    sliderTrackContainer.scrollBy({
      left: -300,
      behavior: 'smooth'
    });
  });

  rightArrow?.addEventListener('click', () => {
    sliderTrackContainer.scrollBy({
      left: 300,
      behavior: 'smooth'
    });
  });


  if (!savedVolumeLevel || savedVolumeLevel === undefined) {
    savedVolumeLevel = volumeLevel;
  }

  if (volumeSlider) {
    volumeSlider.value = volumeLevel;
    volumeSlider.style.background = `linear-gradient(to right, var(--main-color) ${volumeLevel * 100}%, rgba(255,255,255,0.3) ${volumeLevel * 100}%)`;
  }

  // Hook up all your buttons after setting up initial values
  if (playPauseBtn) {
    playPauseBtn.addEventListener('click', () => {globalTogglePlayPause();});
  }

  if (nextBtn) {
    nextBtn.addEventListener('click', () => {
      if (isShuffled) {
        globalShuffleNext();
      } else {
        globalNextSong();
      }
    });
  }

  if (prevBtn) {
    prevBtn.addEventListener('click', () => {globalPrevSong();});
  }

  if (likeBtn) {
    likeBtn.addEventListener('click', () => {
      if (currentSongData?.songId) {
        globalToggleLike(currentSongData.songId);
      }
    });
  }

  if (muteBtn) {
    muteBtn.addEventListener('click', () => {
      if (audioElement.muted) {
        audioElement.muted = false;
        audioElement.volume = savedVolumeLevel || 1;
        muteBtn.innerHTML = '<i class="fa fa-volume-up"></i>';
        volumeSlider.value = savedVolumeLevel || 1;
        volumeSlider.style.background = `linear-gradient(to right, var(--main-color) ${volumeSlider.value * 100}%, rgba(255,255,255,0.3) ${volumeSlider.value * 100}%)`;
      } else {
        savedVolumeLevel = audioElement.volume;
        audioElement.muted = true;
        audioElement.volume = 0;
        muteBtn.innerHTML = '<i class="fa fa-volume-off"></i>';
        volumeSlider.value = 0;
        volumeSlider.style.background = `linear-gradient(to right, var(--main-color) 0%, rgba(255,255,255,0.3) 0%)`;
      }
    });
  }

  if (volumeSlider) {
    volumeSlider.addEventListener('input', (e) => {
      const newVolume = parseFloat(e.target.value);
      if (audioElement) {
        audioElement.volume = newVolume;
        audioElement.muted = newVolume === 0;
      }
      savedVolumeLevel = newVolume;
      volumeSlider.style.background = `linear-gradient(to right, var(--main-color) ${newVolume * 100}%, rgba(255,255,255,0.3) ${newVolume * 100}%)`;
      muteBtn.innerHTML = newVolume === 0 ? '<i class="fa fa-volume-off"></i>' : '<i class="fa fa-volume-up"></i>';
    });
  }

  document.getElementById('shuffle-btn')?.addEventListener('click', globalToggleShuffle);

  // Discography card click
  document.getElementById('discography-container')?.addEventListener('click', (e) => {
    const albumCard = e.target.closest('.album-card');
    if (albumCard) {
      const albumId = albumCard.dataset.albumId;
      if (albumId) {
        window.location.href = `AlbumPage.html?album=${albumId}`;
      }
    }
  });
});


function renderAlbumHeader(album) {
  document.getElementById('album-img').src = album.cover;
  document.getElementById('album-title').textContent = album.title;
  const artistLink = document.getElementById('artist-link');
  artistLink.textContent = album.artist;
  artistLink.href = `ArtistPage.html?artist=${album.artist_id || ''}`;
  document.getElementById('album-stats').innerHTML = `
    <span><i class="fa fa-calendar"></i> ${album.releaseDate}</span>
    <span><i class="fa fa-music"></i> ${album.totalTracks} Tracks</span>
    <span><i class="fa fa-clock-o"></i> ${album.totalDuration}</span>
  `;
}

function renderTrackList(album) {
  const tracksContainer = document.getElementById('tracks-container');
  tracksContainer.innerHTML = '';

  album.tracks.forEach((track, index) => {
    const trackHtml = `
      <div class="track-card" data-src="${track.source}" data-title="${track.title}" data-artist="${track.artist}" data-art="${track.art}" data-song-id="${track.id}" data-index="${index}">
        <span class="track-number">${index + 1}</span>
        <div class="track-info">
          <span class="track-title">${track.title}</span>
          <span class="track-duration">${track.duration}</span>
        </div>
        <button class="like-btn"><i class="fa fa-heart-o"></i></button>
        <button class="track-play-btn"><i class="fa fa-play"></i></button>
      </div>
    `;
    tracksContainer.insertAdjacentHTML('beforeend', trackHtml);
  });

  tracksContainer.addEventListener('click', (e) => {
    const card = e.target.closest('.track-card');
    if (!card) return;
  
    const likeBtn = e.target.closest('.like-btn');
    if (likeBtn) {
      globalToggleLike(card.dataset.songId);
      return;
    }
  
    const src = card.getAttribute('data-src') || card.dataset.src;
    if (currentSongData && src === currentSongData.src && isPlaying) {
      globalTogglePlayPause();
    } else {
      globalPlaySelectedSong(card);
    }
  });    
}

function renderDiscography(album) {
  const discographyContainer = document.getElementById('discography-container');
  discographyContainer.innerHTML = '';

  album.discography.forEach(item => {
    const albumCard = `
        <div class="album-card" data-type="${item.type}" data-album-id="${item.title.toLowerCase().replace(/\s+/g, '-')}">
            <img src="${item.image}" alt="${item.title}" class="album-image">
            <div class="album-info">
                <h4 class="title-albums">${item.title}</h4>
                <p class="release-date">${item.year} • ${item.type.charAt(0).toUpperCase() + item.type.slice(1)}</p>
            </div>
        </div>
    `;

    discographyContainer.insertAdjacentHTML('beforeend', albumCard);
  });
}

function setupDiscographyFilter() {
  const viewOptions = document.querySelectorAll('.view-option');
  const albumCards = document.querySelectorAll('.album-card');

  viewOptions.forEach(option => {
    option.addEventListener('click', () => {
      viewOptions.forEach(opt => opt.classList.remove('active'));
      option.classList.add('active');

      const view = option.dataset.view;
      albumCards.forEach(card => {
        if (view === 'all' || card.dataset.type === view) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
  });
}

function setupAlbumPageButtons() {
  document.querySelector('.play-btn')?.addEventListener('click', () => {
    const firstTrack = document.querySelector('.track-card');
    if (!currentAudio && firstTrack) {
      globalPlaySelectedSong(firstTrack);
    } else {
      globalTogglePlayPause();
    }
  });

  document.querySelectorAll('.shuffle-btn')?.forEach(btn => {
    btn.addEventListener('click', globalToggleShuffle);
  });
}